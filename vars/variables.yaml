---
nftables_variables:
  header:
    note: this is a simple firewall, for ipv4 and ipv6
    def: "# built by me :)"

  tcp_ports:
    note: tcp ports configuration
    def: |
      {% if nftables_open_tcp_ports_global %}define OPEN_TCP_PORTS = { {{ nftables_open_tcp_ports_global | join(",") }} }{% endif +%}
      {% if nftables_open_tcp_ports_local %}define LOCAL_OPEN_TCP_PORTS = { {{ nftables_open_tcp_ports_local | join(",") }} }{% endif +%}
      {% if nftables_open_tcp_ports_vpn %}define VPN_TCP_PORTS = { {{ nftables_open_tcp_ports_vpn | join(",") }} }{% endif +%}

  udp_ports:
    note: udp ports configuration
    def: |
      {% if nftables_open_udp_ports_global %}define OPEN_UDP_PORTS = { {{ nftables_open_udp_ports_global | join(",") }} }{%endif +%}
      {% if nftables_open_udp_ports_local %}define LOCAL_OPEN_UDP_PORTS = { {{ nftables_open_udp_ports_local | join(",") }} }{% endif +%}
      {% if nftables_open_udp_ports_vpn  %}define VPN_UDP_PORTS = { {{ nftables_open_udp_ports_vpn | join(",") }} }{% endif +%}

  local_network:
    note: local ranges in ipv4/ipv6
    def: |
      define LOCAL_IPV4_RANGE = { {{ local_range_ipv4 }} }
      define LOCAL_IPV6_RANGE = { {{ local_range_ipv6 }} }

  interface:
    note: define public interface
    def: |
      define WAN_IF = "eth0"

nftables_sets: |
  set denylist4 { type ipv4_addr;
                  flags dynamic, timeout;
                  timeout 5m; }
  set denylist6 { type ipv6_addr;
                  flags dynamic, timeout;
                  timeout 5m; }
